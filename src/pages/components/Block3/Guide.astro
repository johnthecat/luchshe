---
import TabButton from './TabButton.astro';
import OnlineBadge from './OnlineBadge.astro';
import Graduation from './Graduation.svg';
---

<section class="relative flex shrink-0 gap-[60px]">
  <section class="flex h-full w-[511px] flex-col gap-[20px] rounded-[30px] border border-[#B7B6B1] p-[60px] pr-[48px]">
    <div class="font-[Unbounded] text-[30px] leading-none font-bold">Что в программе</div>
    <TabButton id="open" title="Как открыть своё агентство" active />
    <TabButton id="clients" title="Позиционирование и клиенты" />
    <TabButton id="team" title="Работа в команде: Как находить и увольнять сотрудников" />
    <TabButton id="service" title="Клиентский сервис" />
    <TabButton id="graduation" title="Тестирование и выпускной"><Graduation slot="icon" /></TabButton>
  </section>
  <div class="absolute top-[40px] bottom-[40px] left-[510px] w-[3px] bg-[#FBF3E3]"></div>
  <div class="w-[700px] pt-[100px]">
    <section data-tabblock="" class="w-[500px]">
      <div data-tabcontent="" data-active="true" data-id="open" class="hidden data-[active=true]:block">
        <div class="flex flex-col gap-[30px]">
          <div>
            <OnlineBadge online />
            <div>Особенности агентского бизнеса. Чем занимается и как зарабатывает агентство</div>
          </div>
          <div>
            <OnlineBadge online />
            <div>Юридические основы. Как зарегистрироваться, оформить договоры и платить налоги</div>
          </div>
          <div>
            <OnlineBadge online />
            <div>Как правильно рассчитать юнит-экономику агентства</div>
          </div>
          <div>
            <OnlineBadge />
            <div class="font-bold">Нетворкинг. Чем живет агентство. День открытых дверей и экскурсия по офису</div>
          </div>
        </div>
      </div>
      <div data-tabcontent="" data-active="false" data-id="clients" class="hidden data-[active=true]:block">
        <div class="flex flex-col gap-[30px]">
          <div>
            <OnlineBadge online />
            <div>Как позиционировать себя и находить клиентов</div>
          </div>
          <div>
            <OnlineBadge online />
            <div>Мастер-класс по разработке УТП и выбору специализации</div>
          </div>
          <div>
            <OnlineBadge />
            <div class="font-bold">
              Встреча в офисе ментора. Тема - как готовить КП и мастер-класс по убийству лидов
            </div>
          </div>
        </div>
      </div>
      <div data-tabcontent="" data-active="false" data-id="team" class="hidden data-[active=true]:block">
        <div class="flex flex-col gap-[30px]">
          <div>
            <OnlineBadge online />
            <div>Управление командой. Как найти экспертов и мотивировать их</div>
          </div>
          <div>
            <OnlineBadge online />
            <div>Мастер-класс по чтению резюме и созданию тестовых заданий</div>
          </div>
          <div>
            <OnlineBadge />
            <div class="font-bold">Встреча в офисе ментора. Тема - работа в команде</div>
          </div>
        </div>
      </div>
      <div data-tabcontent="" data-active="false" data-id="service" class="hidden data-[active=true]:block">
        <div class="flex flex-col gap-[30px]">
          <div>
            <OnlineBadge online />
            <div>Как работать с клиентами годы, а не месяцы</div>
          </div>
          <div>
            <OnlineBadge />
            <div class="font-bold">
              Встреча в офисе eLama. Мастер-класс «Разбор подходов, лайфхакер и принципов по взаимодействию команды с
              клиентами»
            </div>
          </div>
          <div>
            <OnlineBadge online />
            <div>«Как растить средний чек и лояльность клиентов вашего агентства»</div>
          </div>
          <div>
            <OnlineBadge online />
            <div>Как зарабатывать в агентстве: из чего складывается маржа и цена</div>
          </div>
        </div>
      </div>
      <div data-tabcontent="" data-active="false" data-id="graduation" class="hidden data-[active=true]:block">
        <div class="flex flex-col gap-[30px]">
          <div>
            <OnlineBadge online />
            <div>Тестирование, по результатам которого выдаётся сертификат</div>
          </div>
          <div>
            <OnlineBadge />
            <div class="font-bold">Выпускной в Санкт-Петербурге</div>
          </div>
        </div>
      </div>
    </section>
  </div>
</section>

<script>
  import autoAnimate from '@formkit/auto-animate';

  const buttons = document.querySelectorAll('[data-tab=""]') as NodeListOf<HTMLElement>;
  const content = document.querySelectorAll('[data-tabcontent=""]') as NodeListOf<HTMLElement>;
  const block = document.querySelector('[data-tabblock=""]');

  buttons.forEach((b) => {
    b.addEventListener('click', (event) => {
      const selectedButton = event.currentTarget as HTMLElement | null;
      if (!selectedButton) return;

      selectedButton.dataset.active = 'true';
      buttons.forEach((button) => {
        if (selectedButton === button) {
          return;
        }
        button.dataset.active = 'false';
      });

      const id = selectedButton.dataset.id;
      content.forEach((content) => {
        content.dataset.active = content.dataset.id === id ? 'true' : 'false';
      });
    });
  });

  if (block) {
    autoAnimate(block);
  }
  console.log(buttons);
</script>
